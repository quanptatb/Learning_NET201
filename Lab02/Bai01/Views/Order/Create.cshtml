@model Bai01.Models.Order
@* nhập thông tin đơn hàng và các chi tiết đơn hàng *@
@{
    ViewData["Title"] = "Create Order";
}
<h2>Create Order</h2>
<form asp-action="Create" method="post">
    <div class="form-group">
        <label asp-for="CustomerName"></label>
        <input asp-for="CustomerName" class="form-control" />
    </div>
    <div class="form-group">
        <label asp-for="OrderDate"></label>
        <input asp-for="OrderDate" class="form-control" type="date" />
    </div>
    <div class="form-group">
        <label asp-for="Status"></label>
        <input asp-for="Status" class="form-control" />
    </div>
    <h4>Order Details</h4>
    <div id="order-details">
        <div class="order-detail-item mb-2">
            <div class="form-group">
                <label>Product Name</label>
                <input name="OrderDetails[0].ProductName" class="form-control" />
            </div>
            <div class="form-group">
                <label>Quantity</label>
                <input name="OrderDetails[0].Quantity" class="form-control" type="number" />
            </div>
            <div class="form-group">
                <label>Price</label>
                <input name="OrderDetails[0].Price" class="form-control" type="number" step="0.01" />
            </div>
        </div>
        <button type="button" id="add-detail" class="btn btn-secondary mb-3">Add Order Detail</button>
        <br />
        <button type="submit" class="btn btn-primary">Create Order</button>
    </div>
</form>

@section Scripts {
    <script>
        let detailIndex = 1;
        document.getElementById('add-detail').addEventListener('click', function () {
            const detailDiv = document.createElement('div');
            detailDiv.classList.add('order-detail-item', 'mb-2');
            detailDiv.innerHTML = `
                    <div class="form-group">
                        <label>Product Name</label>
                        <input name="OrderDetails[${detailIndex}].ProductName" class="form-control"/>
                    </div>
                    <div class="form-group">
                        <label>Quantity</label>
                        <input name="OrderDetails[${detailIndex}].Quantity" class="form-control" type="number" />
                    </div>
                    <div class="form-group">
                        <label>Price</label>
                        <input name="OrderDetails[${detailIndex}].Price" class="form-control" type="number" step="0.01" />
                    </div>
                            `;
            document.getElementById('order-details').appendChild(detailDiv);
            detailIndex++;
        });
    </script>
}